import{aj as l,Z as f,ak as y,O as g,al as E,am as S,an as T,Q as W,ao as _,x as j,a5 as q,A,M as D}from"./runtime.BvuXfmTb.js";import{a as N}from"./misc.CIFqOFj7.js";function k(n){var t=y,s=g;l(null),f(null);try{return n()}finally{l(t),f(s)}}function P(n,t,s,e=s){n.addEventListener(t,()=>k(s));const r=n.__on_r;r?n.__on_r=()=>{r(),e()}:n.__on_r=e,N()}const z=new Set,C=new Set;function F(n,t,s,e){function r(a){if(e.capture||x.call(t,a),!a.cancelBubble)return k(()=>s.call(this,a))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?S(()=>{t.addEventListener(n,r,e)}):t.addEventListener(n,r,e),r}function G(n,t,s,e,r){var a={capture:e,passive:r},u=F(n,t,s,a);(t===document.body||t===window||t===document)&&E(()=>{t.removeEventListener(n,u,a)})}function x(n){var w;var t=this,s=t.ownerDocument,e=n.type,r=((w=n.composedPath)==null?void 0:w.call(n))||[],a=r[0]||n.target,u=0,p=n.__root;if(p){var b=r.indexOf(p);if(b!==-1&&(t===document||t===window)){n.__root=t;return}var h=r.indexOf(t);if(h===-1)return;b<=h&&(u=b)}if(a=r[u]||n.target,a!==t){T(n,"currentTarget",{configurable:!0,get(){return a||s}});var L=y,B=g;l(null),f(null);try{for(var o,m=[];a!==null;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var i=a["__"+e];if(i!==void 0&&!a.disabled)if(W(i)){var[M,...O]=i;M.apply(a,[n,...O])}else i.call(a,n)}catch(c){o?m.push(c):o=c}if(n.cancelBubble||v===t||v===null)break;a=v}if(o){for(let c of m)queueMicrotask(()=>{throw c});throw o}}finally{n.__root=t,delete n.currentTarget,l(L),f(B)}}}function H(n,t,s){if(n==null)return t(void 0),_;const e=j(()=>n.subscribe(t,s));return e.unsubscribe?()=>e.unsubscribe():e}let d=!1;function I(n,t,s){const e=s[t]??(s[t]={store:null,source:q(void 0),unsubscribe:_});if(e.store!==n)if(e.unsubscribe(),e.store=n??null,n==null)e.source.v=void 0,e.unsubscribe=_;else{var r=!0;e.unsubscribe=H(n,a=>{r?e.source.v=a:D(e.source,a)}),r=!1}return A(e.source)}function J(){const n={};return E(()=>{for(var t in n)n[t].unsubscribe()}),n}function Q(n){var t=d;try{return d=!1,[n(),d]}finally{d=t}}export{I as a,z as b,Q as c,G as e,x as h,P as l,C as r,J as s};
